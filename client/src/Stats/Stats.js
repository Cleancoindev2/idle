import moment from 'moment';
import React, { Component } from 'react';
import { Flex } from 'rimble-ui';
// import globalConfigs from '../configs/globalConfigs';
import FunctionsUtil from '../utilities/FunctionsUtil';
import GenericChart from '../GenericChart/GenericChart';
// import styles from './Stats.module.scss';

class Stats extends Component {
  state = {
    chartMode:'AUM',
    chartData:[]
  };

  // Utils
  functionsUtil = null;
  loadUtils(){
    if (this.functionsUtil){
      this.functionsUtil.setProps(this.props);
    } else {
      this.functionsUtil = new FunctionsUtil(this.props);
    }
  }

  componentWillMount() {
    this.loadUtils();
  }

  componentDidMount() {
    this.loadUtils();
    this.loadApiData();
  }

  componentDidUpdate(prevProps) {
    this.loadUtils();

    if (prevProps.selectedToken !== this.props.selectedToken){
      this.loadApiData();
    }
  }

  loadApiData = async () => {
    // const apiInfo = globalConfigs.stats.rates;
    // const endpoint = `${apiInfo.endpoint}${this.props.tokenConfig.address}`;
    // const TTL = apiInfo.TTL ? apiInfo.TTL : 0;
    // const apiResults = this.functionsUtil.makeCachedRequest(endpoint,apiInfo.TTL);
    
    const apiResults = [{"_id":"5e35e4d226e8363261660a20","timestamp":1580590283,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524282442749120000","price":"201570615374643341549855599","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8046247221675781028","price":"1013043555399020358","allocation":"15499626374301334661"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9398804,"idlePrice":"1000207519800815794","idleSupply":"15496410562268093008","idleRate":"8046247221675781028","rebalanced":false},{"_id":"5e35f30926e8363261660a23","timestamp":1580593900,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524265014904320000","price":"201572333282870307241012375","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8060872510967631617","price":"1013052505572267177","allocation":"20499786766072579130"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9399066,"idlePrice":"1000216356568531534","idleSupply":"20495352461943068787","idleRate":"8060872510967631617","rebalanced":false},{"_id":"5e36012426e8363261660a26","timestamp":1580597519,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524367743844800000","price":"201574350699635477349628416","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8046147783944788093","price":"1013061464077461903","allocation":"21499976025254950533"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9399348,"idlePrice":"1000225201562623037","idleSupply":"21495135287199479613","idleRate":"8046147783944788093","rebalanced":false},{"_id":"5e360f4826e8363261660a29","timestamp":1580601130,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524369749954880000","price":"201576124356889099749131431","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8053181171438267405","price":"1013070398942606203","allocation":"21500165647892078746"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9399607,"idlePrice":"1000233886347490804","idleSupply":"21495135287199479613","idleRate":"8053181171438267405","rebalanced":false},{"_id":"5e361d6626e8363261660a2c","timestamp":1580604734,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524399545167680000","price":"201578072597224559701402185","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8062656212806408494","price":"1013079322047404299","allocation":"21500355020942019605"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9399897,"idlePrice":"1000242833258446546","idleSupply":"21495135287199479613","idleRate":"8062656212806408494","rebalanced":false},{"_id":"5e362b6d26e8363261660a2f","timestamp":1580608357,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523523839013120000","price":"201579858863067402333492077","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8062679003125520405","price":"1013088297884409063","allocation":"21500545513115744482"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9400175,"idlePrice":"1000251695364740816","idleSupply":"21495135287199479613","idleRate":"8062679003125520405","rebalanced":false},{"_id":"5e36398026e8363261660a32","timestamp":1580611962,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523497898340480000","price":"201581569177374167047152645","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8061295140827167994","price":"1013097230643731892","allocation":"21500735091061496361"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9400461,"idlePrice":"1000260514939180283","idleSupply":"21495135287199479613","idleRate":"8061295140827167994","rebalanced":false},{"_id":"5e36479226e8363261660a35","timestamp":1580615564,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522986900349440000","price":"201583452385584234839510626","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8060153070830078397","price":"1013106153998706605","allocation":"16499577843278719854"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9400706,"idlePrice":"1000269325228431908","idleSupply":"16495135287199479613","idleRate":"8060153070830078397","rebalanced":false},{"_id":"5e3655b826e8363261660a38","timestamp":1580619188,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523141897476800000","price":"201585253031918538348003521","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8060061183562294604","price":"1013115131130139836","allocation":"16499724046002202796"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9400988,"idlePrice":"1000278188612753248","idleSupply":"16495135287199479613","idleRate":"8060061183562294604","rebalanced":false},{"_id":"5e3663f026e8363261660a3b","timestamp":1580622792,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523089057016640000","price":"201587388363094430278597575","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8060459006368751469","price":"1013124058891337553","allocation":"21501189177276583544"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9401274,"idlePrice":"1000287003252397666","idleSupply":"21495020036615721820","idleRate":"8060459006368751469","rebalanced":false},{"_id":"5e3671f226e8363261660a3e","timestamp":1580626398,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523325601404480000","price":"201589356328280275898259362","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8064475665518776829","price":"1013132993687268559","allocation":"16499899673239921057"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9401569,"idlePrice":"1000295824837639929","idleSupply":"16495020036615721820","idleRate":"8064475665518776829","rebalanced":false},{"_id":"5e36800226e8363261660a41","timestamp":1580630008,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523340079161600000","price":"201591190172170154368874865","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8065352064600997417","price":"1013141940500683946","allocation":"16500045381182184212"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9401830,"idlePrice":"1000304658288095868","idleSupply":"16495020036615721820","idleRate":"8065352064600997417","rebalanced":false},{"_id":"5e368e1026e8363261660a44","timestamp":1580633609,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523361503038080000","price":"201592913198428018590798081","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8066105031364240315","price":"1013150865356312542","allocation":"16500190731519590597"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9402081,"idlePrice":"1000313470058986945","idleSupply":"16495020036615721820","idleRate":"8066105031364240315","rebalanced":false},{"_id":"5e369c2c26e8363261660a47","timestamp":1580637223,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523421205942080000","price":"201594761453720147568058077","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8060135851277905378","price":"1013159822042266813","allocation":"16500336600246175377"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9402350,"idlePrice":"1000322313256889159","idleSupply":"16495020036615721820","idleRate":"8060135851277905378","rebalanced":false},{"_id":"5e36aa6d26e8363261660a4a","timestamp":1580640860,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523547478819200000","price":"201596628640147152201771292","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8096195486244959545","price":"1013168853656751689","allocation":"16500483689259973534"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9402625,"idlePrice":"1000331230433920266","idleSupply":"16495020036615721820","idleRate":"8096195486244959545","rebalanced":false},{"_id":"5e36b87726e8363261660a4d","timestamp":1580644467,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523769305355840000","price":"201598622023961135777574397","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8097068972552739073","price":"1013177823723159620","allocation":"16500629775900834474"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9402918,"idlePrice":"1000340081934603690","idleSupply":"16495020036615721820","idleRate":"8097068972552739073","rebalanced":false},{"_id":"5e36c69a26e8363261660a50","timestamp":1580648087,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523919001912320000","price":"201600426210516394153513494","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8096183978862102489","price":"1013186816470011097","allocation":"16500776231915751323"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9403182,"idlePrice":"1000348965644615882","idleSupply":"16495020036615721820","idleRate":"8096183978862102489","rebalanced":false},{"_id":"5e36d4bd26e8363261660a53","timestamp":1580651694,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524000611614080000","price":"201602422771435629100590365","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8095840350579495118","price":"1013195781814935784","allocation":"16500922241662462808"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9403476,"idlePrice":"1000357817391772743","idleSupply":"16495020036615721820","idleRate":"8095840350579495118","rebalanced":false},{"_id":"5e36e2e126e8363261660a56","timestamp":1580655320,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524068891889600000","price":"201604301936673427461187661","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8085744290890193061","price":"1013204792199331475","allocation":"16501068984922698709"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9403753,"idlePrice":"1000366713607716111","idleSupply":"16495020036615721820","idleRate":"8085744290890193061","rebalanced":false},{"_id":"5e36f10026e8363261660a59","timestamp":1580658941,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523890142057280000","price":"201606038937236844036280312","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8088210397701186374","price":"1013213786143750199","allocation":"16501215460441214346"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9404005,"idlePrice":"1000375593591989575","idleSupply":"16495020036615721820","idleRate":"8088210397701186374","rebalanced":false},{"_id":"5e36ff2026e8363261660a5c","timestamp":1580662555,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522970610954240000","price":"201607952290068944228356407","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8088902743178497225","price":"1013222765138631825","allocation":"16501361692491336578"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9404288,"idlePrice":"1000384458816147996","idleSupply":"16495020036615721820","idleRate":"8088902743178497225","rebalanced":false},{"_id":"5e370d3626e8363261660a5f","timestamp":1580666161,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522848536990400000","price":"201609819558620856189188213","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8091438027654085495","price":"1013231724688657276","allocation":"16501507607862229085"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9404564,"idlePrice":"1000393304841831420","idleSupply":"16495020036615721820","idleRate":"8091438027654085495","rebalanced":false},{"_id":"5e371b4a26e8363261660a62","timestamp":1580669763,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522877469588480000","price":"201611725647802211302089083","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8088989939155327568","price":"1013240674932647445","allocation":"18501679768005575785"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9404845,"idlePrice":"1000402141679394138","idleSupply":"18494242462282671046","idleRate":"8088989939155327568","rebalanced":false},{"_id":"5e37296226e8363261660a65","timestamp":1580673368,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522943308136640000","price":"201613689002814018728633906","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8081240795266062519","price":"1013249631607385419","allocation":"21503304796889098835"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9405138,"idlePrice":"1000410984866222174","idleSupply":"21494470894643947169","idleRate":"8081240795266062519","rebalanced":false},{"_id":"5e37378326e8363261660a68","timestamp":1580676981,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523003969945280000","price":"201615456731524454182515674","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8069428467174397560","price":"1013258595798249638","allocation":"24989295718333572913"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9405399,"idlePrice":"1000419835473941395","idleSupply":"24978808728332621922","idleRate":"8069428467174397560","rebalanced":false},{"_id":"5e3745b526e8363261660a6b","timestamp":1580680581,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524135706371840000","price":"201617283210094204990058655","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8070848630301496510","price":"1013267527988461654","allocation":"24989516006760975423"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9405647,"idlePrice":"1000428654486481118","idleSupply":"24978808728332621922","idleRate":"8070848630301496510","rebalanced":false},{"_id":"5e3753b526e8363261660a6e","timestamp":1580684186,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523323603704000000","price":"201618957465275631553057838","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8064846455684644912","price":"1013276472664788407","allocation":"26836661340770697952"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9405900,"idlePrice":"1000437485826926968","idleSupply":"26824925815917866549","idleRate":"8064846455684644912","rebalanced":false},{"_id":"5e3761d626e8363261660a71","timestamp":1580687828,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523186665982400000","price":"201620901830529011664318957","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8064820055401614447","price":"1013285399286842526","allocation":"263214474045731672968"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9406164,"idlePrice":"1000446404641100308","idleSupply":"263097054003684101132","idleRate":"8064820055401614447","rebalanced":false},{"_id":"5e37700f26e8363261660a74","timestamp":1580691447,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523248920148800000","price":"201622703940607795966797410","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8066403264594364721","price":"1013294482392244635","allocation":"263212334635579915704"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9406421,"idlePrice":"1000455267357380697","idleSupply":"263092557182324988667","idleRate":"8066403264594364721","rebalanced":false},{"_id":"5e377e3126e8363261660a77","timestamp":1580695059,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523101937580480000","price":"201624540554041479736125663","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8070764438285785236","price":"1013303443502055376","allocation":"263214662364266094318"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9406699,"idlePrice":"1000464114923085740","idleSupply":"263092557182324988667","idleRate":"8070764438285785236","rebalanced":false},{"_id":"5e378c3d26e8363261660a7a","timestamp":1580698663,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523009064270720000","price":"201626374090023004893843200","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8078177427724843803","price":"1013312389759480498","allocation":"263216986234911829984"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9406953,"idlePrice":"1000472947824596235","idleSupply":"263092557182324988667","idleRate":"8078177427724843803","rebalanced":false},{"_id":"5e379a4f26e8363261660a7d","timestamp":1580702268,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523030588221440000","price":"201628109261694083604309778","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8090426130050883713","price":"1013321345223702072","allocation":"402361704114897066473"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9407225,"idlePrice":"1000481789816246038","idleSupply":"402167943695204106759","idleRate":"8090426130050883713","rebalanced":false},{"_id":"5e37a85e26e8363261660a80","timestamp":1580705870,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523018854727040000","price":"201629842980429358264648907","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8088581901262392713","price":"1013330298075233213","allocation":"402365259043070381833"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9407507,"idlePrice":"1000490629228310192","idleSupply":"402167943695204106759","idleRate":"8088581901262392713","rebalanced":false},{"_id":"5e37b67d26e8363261660a83","timestamp":1580709495,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523017757064000000","price":"201632090876824552542212273","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8088111259386297983","price":"1013339307648157390","allocation":"402368836493730240390"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9407818,"idlePrice":"1000499524643064009","idleSupply":"402167943695204106759","idleRate":"8088111259386297983","rebalanced":false},{"_id":"5e37c49c26e8363261660a86","timestamp":1580713097,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522993673231040000","price":"201633780146505793359890325","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8084757177413612965","price":"1013348259643295306","allocation":"402372391081853640659"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9408077,"idlePrice":"1000508363209586095","idleSupply":"402167943695204106759","idleRate":"8084757177413612965","rebalanced":false},{"_id":"5e37d2a426e8363261660a89","timestamp":1580716706,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522999471860480000","price":"201635764900803431396920085","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003960932622474369","price":"1013357204231529930","allocation":"402375942728901887590"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9408350,"idlePrice":"1000517194463056010","idleSupply":"402167943695204106759","idleRate":"8003960932622474369","rebalanced":false},{"_id":"5e37e0c326e8363261660a8c","timestamp":1580720309,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522854924291840000","price":"201637682748479306383059977","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8002043590336628839","price":"1013366116479412236","allocation":"402379481534496303828"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9408639,"idlePrice":"1000525993785950572","idleSupply":"402167943695204106759","idleRate":"8002043590336628839","rebalanced":false},{"_id":"5e37eecf26e8363261660a8f","timestamp":1580723915,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522871347189440000","price":"201639477945748367105966811","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8002637230932284015","price":"1013375015544769956","allocation":"402383015105677094062"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9408883,"idlePrice":"1000534780093353203","idleSupply":"402167943695204106759","idleRate":"8002637230932284015","rebalanced":false},{"_id":"5e37fcef26e8363261660a92","timestamp":1580727528,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522880366275200000","price":"201641339351650930895095775","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003933459547774820","price":"1013383971552015590","allocation":"402386571286896806883"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9409162,"idlePrice":"1000543622621146537","idleSupply":"402167943695204106759","idleRate":"8003933459547774820","rebalanced":false},{"_id":"5e380b2226e8363261660a95","timestamp":1580731161,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522881916164480000","price":"201643180532707646366877396","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003754819839185540","price":"1013392958505336945","allocation":"402390139755941918292"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9409434,"idlePrice":"1000552495702905177","idleSupply":"402167943695204106759","idleRate":"8003754819839185540","rebalanced":false},{"_id":"5e38193826e8363261660a98","timestamp":1580734772,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522776866594880000","price":"201645064706408702247786294","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003362956825275289","price":"1013401891025902324","allocation":"402393686611254567232"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9409708,"idlePrice":"1000561315041612433","idleSupply":"402167943695204106759","idleRate":"8003362956825275289","rebalanced":false},{"_id":"5e38274f26e8363261660a9b","timestamp":1580738378,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522718268712320000","price":"201646937149586208711796458","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003154434641972551","price":"1013410759184351409","allocation":"402397207910162118657"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9409988,"idlePrice":"1000570070833720569","idleSupply":"402167943695204106759","idleRate":"8003154434641972551","rebalanced":false},{"_id":"5e38356826e8363261660a9e","timestamp":1580741980,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522688955579840000","price":"201648937544474988932478297","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003155816751139225","price":"1013419721435304302","allocation":"402400766570584213396"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9410283,"idlePrice":"1000578899987330402","idleSupply":"402167943695204106759","idleRate":"8003155816751139225","rebalanced":false},{"_id":"5e38439126e8363261660aa1","timestamp":1580745594,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522731697371840000","price":"201650851870914608326705319","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003374680788897807","price":"1013428661501923442","allocation":"404401666633641438290"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9410569,"idlePrice":"1000587746315255375","idleSupply":"404164120660964527538","idleRate":"8003374680788897807","rebalanced":false},{"_id":"5e3851b126e8363261660aa4","timestamp":1580749218,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522754042309760000","price":"201652598681501457132104154","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"7997742698155179643","price":"1013437626187584689","allocation":"405405793370840215957"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9410832,"idlePrice":"1000596597411502167","idleSupply":"405164073533336553364","idleRate":"7997742698155179643","rebalanced":false},{"_id":"5e385fb926e8363261660aa7","timestamp":1580752822,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7522755932367360000","price":"201654363364618612308237769","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003002794432427239","price":"1013446538901855599","allocation":"1488131563805823545479"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9411078,"idlePrice":"1000605397194875833","idleSupply":"1487231198210295207646","idleRate":"8003002794432427239","rebalanced":false},{"_id":"5e386e1226e8363261660aaa","timestamp":1580756447,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523934928223040000","price":"201656324820928584617879825","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8003709461699092757","price":"1013455506349809484","allocation":"1622993441697268066460"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9411366,"idlePrice":"1000614251018414906","idleSupply":"1621997128309338001150","idleRate":"8003709461699092757","rebalanced":false},{"_id":"5e387bf926e8363261660aad","timestamp":1580760055,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523871808708800000","price":"201658212362251955962203246","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8001122325247687394","price":"1013464430677915599","allocation":"1611172951216327822610"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9411646,"idlePrice":"1000623062268467615","idleSupply":"1610169715220944406177","idleRate":"8001122325247687394","rebalanced":false},{"_id":"5e388a1726e8363261660ab0","timestamp":1580763664,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523609780920320000","price":"201660026389598756403384365","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014006509491393774","price":"1013473363719799817","allocation":"1713095959611718882975"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9411930,"idlePrice":"1000631882121888203","idleSupply":"1712014168466245763259","idleRate":"8014006509491393774","rebalanced":false},{"_id":"5e38982c26e8363261660ab3","timestamp":1580767272,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523641961726400000","price":"201661835575104612638363677","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8013924256834963288","price":"1013482297777625190","allocation":"1852216418818223568405"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9412175,"idlePrice":"1000640702978377195","idleSupply":"1851030458090657978493","idleRate":"8013924256834963288","rebalanced":false},{"_id":"5e38a64d26e8363261660ab6","timestamp":1580770880,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523599977429120000","price":"201663755651082039437667284","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014593916523468114","price":"1013491232356369583","allocation":"1974044330105191241605"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9412449,"idlePrice":"1000649497454488514","idleSupply":"1972762972519369792600","idleRate":"8014593916523468114","rebalanced":false},{"_id":"5e38b46f26e8363261660ab9","timestamp":1580774484,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523753421513600000","price":"201665602656305934045583532","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8009389039877702299","price":"1013500154544512107","allocation":"2169618340071148793982"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9412710,"idlePrice":"1000658333486388857","idleSupply":"2168190947365612830269","idleRate":"8009389039877702299","rebalanced":false},{"_id":"5e38c26826e8363261660abc","timestamp":1580778086,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523767349282880000","price":"201667388453356265682152861","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8020432386580551359","price":"1013509073482015502","allocation":"2468773915731626512046"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9412961,"idlePrice":"1000667139414141900","idleSupply":"2467127997404824778072","idleRate":"8020432386580551359","rebalanced":false},{"_id":"5e38d09326e8363261660abf","timestamp":1580781690,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523459894306880000","price":"201669134612894474367361360","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8020523276804738823","price":"1013518003008056224","allocation":"2566390000658715987971"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9413218,"idlePrice":"1000675955796267414","idleSupply":"2564656406295446224337","idleRate":"8020523276804738823","rebalanced":false},{"_id":"5e38dea726e8363261660ac2","timestamp":1580785306,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523447762828160000","price":"201671111842970311792658897","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8020548589288855624","price":"1013526962242618843","allocation":"2566412686876352793582"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9413504,"idlePrice":"1000684801510485162","idleSupply":"2564656406295446224337","idleRate":"8020548589288855624","rebalanced":false},{"_id":"5e38ecb126e8363261660ac5","timestamp":1580788908,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523445540170880000","price":"201672943941626412564104246","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8021551412686303404","price":"1013535887319434211","allocation":"2566435286601099754296"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9413771,"idlePrice":"1000693613499760405","idleSupply":"2564656406295446224337","idleRate":"8021551412686303404","rebalanced":false},{"_id":"5e38facf26e8363261660ac8","timestamp":1580792514,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7523451690111360000","price":"201674758166790635267171796","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014673872423583215","price":"1013544821115506133","allocation":"5603408582735298243712"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9414060,"idlePrice":"1000702434097812563","idleSupply":"5599475320340431198376","idleRate":"8014673872423583215","rebalanced":false},{"_id":"5e39090e26e8363261660acb","timestamp":1580796125,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524481833734400000","price":"201676835209942269449855904","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014644749568398854","price":"1013553717265021216","allocation":"5603666003869619567966"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9414356,"idlePrice":"1000711263986704235","idleSupply":"5599683410885962450662","idleRate":"8014644749568398854","rebalanced":false},{"_id":"5e3916fa26e8363261660ace","timestamp":1580799735,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524482093801280000","price":"201678639616217539218294707","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014500275857975232","price":"1013562705091369626","allocation":"5603715695145078725004"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9414651,"idlePrice":"1000720091470042285","idleSupply":"5599683410885962450662","idleRate":"8014500275857975232","rebalanced":false},{"_id":"5e39251c26e8363261660ad1","timestamp":1580803352,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524508451800320000","price":"201680459492437433980610990","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014469166217966386","price":"1013571663224048646","allocation":"5603765222252223113404"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9414907,"idlePrice":"1000728936096338141","idleSupply":"5599683410885962450662","idleRate":"8014469166217966386","rebalanced":false},{"_id":"5e39334326e8363261660ad4","timestamp":1580806966,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524508690843200000","price":"201682506402014576577497301","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014464956133443791","price":"1013580613987281285","allocation":"5603814708615679773065"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9415192,"idlePrice":"1000737773446564130","idleSupply":"5599683410885962450662","idleRate":"8014464956133443791","rebalanced":false},{"_id":"5e39416c26e8363261660ad7","timestamp":1580810572,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524489145881600000","price":"201684327488203473014320355","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8014050388611902657","price":"1013589544938721459","allocation":"5607864102813361116609"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9415456,"idlePrice":"1000746591236028196","idleSupply":"5603680444104290258826","idleRate":"8014050388611902657","rebalanced":false},{"_id":"5e394f6326e8363261660ada","timestamp":1580814173,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7524459454106880000","price":"201686216307210372865282533","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8013870201212124530","price":"1013598463323266289","allocation":"5607913445359161607549"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9415730,"idlePrice":"1000755374610563214","idleSupply":"5603680444104290258826","idleRate":"8013870201212124530","rebalanced":false},{"_id":"5e395d9826e8363261660add","timestamp":1580817787,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"7935643629855360000","price":"201688018181241677815460512","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8626188362350130024","price":"1013607736203484048","allocation":"5607964749215207205045"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9415982,"idlePrice":"1000764552003571960","idleSupply":"5603680444104290258826","idleRate":"8626188362350130024","rebalanced":false},{"_id":"5e396baa26e8363261660ae0","timestamp":1580821397,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8453050335069120000","price":"201689963231263349676447972","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8616512754576809922","price":"1013617383553232288","allocation":"5608018124890410831377"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9416246,"idlePrice":"1000774077114030352","idleSupply":"5603680444104290258826","idleRate":"8616512754576809922","rebalanced":false},{"_id":"5e3979c226e8363261660ae3","timestamp":1580825003,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8453034845216640000","price":"201692076902643099040817073","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8621063928887179209","price":"1013627020088534678","allocation":"6531034805322714726575"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9416532,"idlePrice":"1000783591547070183","idleSupply":"6525921148673767420296","idleRate":"8621063928887179209","rebalanced":false},{"_id":"5e3987dc26e8363261660ae6","timestamp":1580828610,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8451840925895040000","price":"201694315778335296780578065","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8724678788638235798","price":"1013636742433275682","allocation":"6576521232823637821116"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9416818,"idlePrice":"1000793190702277501","idleSupply":"6571308931677238336610","idleRate":"8724678788638235798","rebalanced":false},{"_id":"5e3995e826e8363261660ae9","timestamp":1580832228,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8451669110408640000","price":"201696460892170183741172879","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8728759242916784589","price":"1013646511841075409","allocation":"18576611597616342551771"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9417102,"idlePrice":"1000802836324218641","idleSupply":"18561709582923574262824","idleRate":"8728759242916784589","rebalanced":false},{"_id":"5e39a42a26e8363261660aec","timestamp":1580835855,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8450845415317440000","price":"201698505048357029847687251","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8727208969807192092","price":"1013656218880065011","allocation":"18614201511908028466563"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9417377,"idlePrice":"1000812505683164175","idleSupply":"18599091231372622608648","idleRate":"8727208969807192092","rebalanced":false},{"_id":"5e39b22826e8363261660aef","timestamp":1580839460,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8450800185335040000","price":"201700621680998102609822604","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8735313423281717991","price":"1013666042115058201","allocation":"18654382225434430832964"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9417644,"idlePrice":"1000822119134713067","idleSupply":"18639058698625250975610","idleRate":"8735313423281717991","rebalanced":false},{"_id":"5e39c04c26e8363261660af2","timestamp":1580843073,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8450499758472000000","price":"201702712496049088277335030","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8751499437127894414","price":"1013675828942811381","allocation":"18654562331325421691193"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9417914,"idlePrice":"1000831760597813469","idleSupply":"18639058698625250975610","idleRate":"8751499437127894414","rebalanced":false},{"_id":"5e39ce8026e8363261660af5","timestamp":1580846712,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8450637326913600000","price":"201704812518725230009873907","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8750820691872293308","price":"1013685647226797304","allocation":"19833159793119517731116"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9418180,"idlePrice":"1000841475834712271","idleSupply":"19816484700115425150672","idleRate":"8750820691872293308","rebalanced":false},{"_id":"5e39dc9526e8363261660af8","timestamp":1580850314,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8450323515331200000","price":"201706843913142341984741674","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"8765290832903043888","price":"1013695383703282277","allocation":"19833350291124966175351"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9418442,"idlePrice":"1000851088942603568","idleSupply":"19816484700115425150672","idleRate":"8765290832903043888","rebalanced":false},{"_id":"5e3c624c95c3f767a5b77101","timestamp":1581015611,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8447548034283840000","price":"201802240188835521504163091","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"9285137072881947511","price":"1014147437438121906","allocation":"82599761615923891781122"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9430859,"idlePrice":"1001297414811349208","idleSupply":"82492734320587666119226","idleRate":"9285137072881947511","rebalanced":false},{"_id":"5e3c705b95c3f767a5b77104","timestamp":1581019220,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8447331173405760000","price":"201804255424383211878049789","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"9336101837617106077","price":"1014158059689716137","allocation":"82600626771637073161918"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9431145,"idlePrice":"1001307902470902584","idleSupply":"82492734320587666119226","idleRate":"9336101837617106077","rebalanced":false},{"_id":"5e3c7e7495c3f767a5b77107","timestamp":1581022831,"protocolsData":[{"protocolAddr":"0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643","rate":"8447447257001280000","price":"201806349634024051065582744","allocation":"0"},{"protocolAddr":"0x493C57C4763932315A328269E1ADaD09653B9081","rate":"9425038066464097842","price":"1014168284996801068","allocation":"82601459597216949906314"}],"address":"0x6b175474e89094c44da98b954eedeac495271d0f","blocknumber":9431421,"idlePrice":"1001318080006809636","idleSupply":"82492734320587666119226","idleRate":"9425038066464097842","rebalanced":false}];
    const chartData = [];

    switch (this.state.chartMode){
      case 'AUM':
        const aumData = {
          id:'AUM',
          color: "hsl(227, 100%, 50%)",
          data: []
        };

        const data = {};
        apiResults.forEach((d,i) => {
          const aum = this.functionsUtil.BNify(d.idleSupply).div(1e18);
          data[moment(d.timestamp*1000).format("YYYY/MM/DD HH:mm")] = {
            x: moment(d.timestamp*1000).format("YYYY/MM/DD HH:mm"),
            y: parseInt(aum.toString())
          };
        })

        aumData.data = Object.values(data);

        chartData.push(aumData);
      break;
      default:
      break;
    }

    console.log(chartData);

    this.setState({
      chartData
    });
  }

  render() {
    return (
      <Flex p={4}>
        <GenericChart
          data={this.state.chartData}
          xScale={{
              type: 'time',
              format: '%Y/%m/%d %H:%M',
              // precision: 'hour',
          }}
          xFormat='time:%b %d %H:%M'
          yFormat={value =>
            parseFloat(value/1000).toFixed(2)+'K '+this.props.selectedToken
          }
          yScale={{
              type: 'linear',
              stacked: false
          }}
          axisLeft={{
            format: value => parseInt(value/1000)+'K '+this.props.selectedToken,
            orient: 'left',
            tickSize: 5,
            tickPadding: 5,
            tickRotation: 0,
            legend: 'count',
            legendOffset: -65,
            legendPosition: 'middle'
          }}
          axisBottom={{
            format: '%b %d %H:%M',
            orient: 'bottom',
            // tickSize: 1,
            // tickPadding: 1,
            // tickRotation: 0,
            legend: 'time',
            legendOffset: 36,
            legendPosition: 'middle'
          }}
          curve={"catmullRom"}
          enableSlices={false}
          width={document.body.offsetWidth*3/4}
          height={450}
          margin={{ top: 20, right: 20, bottom: 60, left: 80 }}
        />
      </Flex>
    );
  }
}

export default Stats;
